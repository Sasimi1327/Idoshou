import{L as w}from"./index-6bd3d174.js";/* empty css              */import{c as p}from"./cart-35a250e2.js";import{_ as x,b as V,m as C,r as l,o as L,d as S,f as t,e,w as _,h as R,n as m,bu as k,bl as z,i as h}from"./index-2907266f.js";import{S as c}from"./sweetalert2.all-e094260c.js";const{VITE_URL:I,VITE_PATH:U}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"sasimi1327",BASE_URL:"/Idoshou/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{color:"#C0362D",isLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{...V(p,["carts","loading"]),isComplete(){return this.form.user.name&&this.form.user.email&&this.form.user.tel&&this.form.user.address}},watch:{loading(){this.isLoading=this.loading}},methods:{...C(p,["getCarts"]),onSubmit(v){this.carts.length===0&&(c.fire({position:"top-end",icon:"error",color:"#C0362D",toast:!0,text:"購物車為空",showConfirmButton:!1,timer:3e3,showClass:{popup:"animate__animated animate__fadeInRight"}}),this.$router.push({name:"product-list"})),this.isLoading=!0;const o=`${I}/api/${U}/order`,f=this.form;this.$http.post(o,{data:f}).then(r=>{this.getCarts(),this.isLoading=!1,c.fire({position:"top-end",icon:"success",color:"#C0362D",toast:!0,text:"已建立訂單",showConfirmButton:!1,timer:1500,width:300,showClass:{popup:"animate__animated animate__fadeInRight"},hideClass:{popup:"animate__animated animate__fadeOutRight"}}),this.form.message="",this.$refs.form.resetForm(),this.$router.push({name:"order-detail",params:{id:r.data.orderId}})}).catch(r=>{this.isLoading=!1,c.fire({position:"top-end",icon:"error",title:r.response.data.message,showConfirmButton:!1,timer:1500,showClass:{popup:"animate__animated animate__fadeInRight"},hideClass:{popup:"animate__animated animate__fadeOutRight"}})})}},components:{LoadingView:w}},T={class:"vl-parent"},B=R('<div class="container-fluid header-picture d-flex flex-column justify-content-center"><div class="container"><ul class="row list-unstyled mb-0 justify-content-center align-items-center border border-1 border-dark text-center align-top"><li class="col-2 py-3 fz-6 word-nowrap text-primary"> Step.1 <div>購物車</div></li><li class="col-1 py-3 fz-6 text-primary"><i class="fa-solid fa-arrow-right"></i></li><li class="col-2 py-3 fz-6 word-nowrap text-primary"> Step.2 <div>訂單資訊</div></li><li class="col-1 py-3 fz-6 text-grey-66 opacity-50"><i class="fa-solid fa-arrow-right"></i></li><li class="col-2 py-3 fz-6 word-nowrap text-grey-66 opacity-50"> Step.3 <div>確認訂單</div></li><li class="col-1 py-3 fz-6 text-grey-66 opacity-50"><i class="fa-solid fa-arrow-right"></i></li><li class="col-2 py-3 fz-6 word-nowrap text-grey-66 opacity-50"> Step.4 <div>完成訂單</div></li></ul></div></div>',1),D={class:"container my-10 mb-md-20"},q=e("div",{class:"text-center pt-10 mb-6"},[e("h2",{class:"fz-2 lh-sm fw-normal"},"收件者資訊")],-1),A={class:"row"},N={class:"col-md-6 mb-6"},O={class:"form-floating mb-3"},H=e("label",{for:"name"},"收件人姓名",-1),P={class:"col-md-6 mb-6"},j={class:"form-floating mb-3"},M=e("label",{for:"email"},"電子郵件",-1),F={class:"col-md-6 mb-6"},G={class:"form-floating mb-3"},J=e("label",{for:"tel"},"收件人電話",-1),K={class:"col-md-6 mb-6"},Q={class:"form-floating mb-3"},W=e("label",{for:"address"},"收件人地址",-1),X={class:"col-12 mb-6"},Y={class:"form-floating mb-3"},Z=e("label",{for:"msg"},"留言",-1),$={class:"text-end"},ee=e("i",{class:"fa-solid fa-credit-card mr-1"},null,-1),se=["disabled"],oe=e("i",{class:"fa-regular fa-rectangle-list mr-1"},null,-1);function te(v,o,f,r,s,u){const b=l("LoadingView"),n=l("v-field"),d=l("error-message"),g=l("RouterLink"),y=l("v-form");return L(),S("div",T,[t(b,{active:s.isLoading,"onUpdate:active":o[0]||(o[0]=i=>s.isLoading=i),"can-cancel":!1,color:s.color,loader:"bars","is-full-page":!0},null,8,["active","color"]),B,e("div",D,[q,t(y,{ref:"form",onSubmit:u.onSubmit},{default:_(({errors:i})=>[e("div",A,[e("div",N,[e("div",O,[t(n,{type:"text",class:m(["form-control",{"is-invalid":i.姓名,"is-valid":s.form.user.name&&!i.姓名}]),id:"name",name:"姓名",placeholder:"請輸入姓名",rules:"required",modelValue:s.form.user.name,"onUpdate:modelValue":o[1]||(o[1]=a=>s.form.user.name=a)},null,8,["class","modelValue"]),H,t(d,{name:"姓名",class:"invalid-feedback"})])]),e("div",P,[e("div",j,[t(n,{type:"email",class:m(["form-control",{"is-invalid":i.電子郵件,"is-valid":s.form.user.email&&!i.電子郵件}]),id:"email",name:"電子郵件",placeholder:"請輸入電子郵件",rules:"email|required",modelValue:s.form.user.email,"onUpdate:modelValue":o[2]||(o[2]=a=>s.form.user.email=a)},null,8,["class","modelValue"]),M,t(d,{name:"電子郵件",class:"invalid-feedback"})])]),e("div",F,[e("div",G,[t(n,{type:"tel",class:m(["form-control",{"is-invalid":i.電話,"is-valid":s.form.user.tel&&!i.電話}]),id:"tel",name:"電話",placeholder:"請輸入電話",rules:{numeric:!0,required:!0,min:8,regex:/^(09)([0-9]{2})([0-9]{6})$|^(0)([0-9]{1})([0-9]{6,8})$/},modelValue:s.form.user.tel,"onUpdate:modelValue":o[3]||(o[3]=a=>s.form.user.tel=a)},null,8,["class","rules","modelValue"]),J,t(d,{name:"電話",class:"invalid-feedback"})])]),e("div",K,[e("div",Q,[t(n,{type:"text",class:m(["form-control",{"is-invalid":i.地址,"is-valid":s.form.user.address&&!i.地址}]),id:"address",name:"地址",placeholder:"請輸入地址",rules:"required",modelValue:s.form.user.address,"onUpdate:modelValue":o[4]||(o[4]=a=>s.form.user.address=a)},null,8,["class","modelValue"]),W,t(d,{name:"地址",class:"invalid-feedback"})])]),e("div",X,[e("div",Y,[k(e("textarea",{id:"msg",class:"form-control",placeholder:"請輸入留言","onUpdate:modelValue":o[5]||(o[5]=a=>s.form.message=a),style:{height:"100px"}},null,512),[[z,s.form.message]]),Z])])]),e("div",$,[t(g,{to:"/cart",type:"button",class:"btn btn-outline-primary py-4 px-20 fw-bold mr-md-4 mb-4 mb-md-0 hvr-bob"},{default:_(()=>[ee,h(" 返回購物車 ")]),_:1}),e("button",{type:"submit",class:"btn btn-primary py-4 px-20 btnCustomHover fw-bold",disabled:!u.isComplete},[oe,h(" 送出訂單 ")],8,se)])]),_:1},8,["onSubmit"])])])}const de=x(E,[["render",te]]);export{de as default};
