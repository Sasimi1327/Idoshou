import{L}from"./index-e9559f79.js";/* empty css              */import{M as T}from"./bootstrap.esm-726e85d3.js";import{_ as x,o as a,d as n,e as t,bu as C,bl as k,C as p,F as g,B as z,bj as M,t as c,a as V,m as R,b as B,r as b,f as y,i as d,w as D,Y as U,h as I}from"./index-8fbcde8d.js";import{c as w}from"./cart-56129446.js";import{S as u}from"./sweetalert2.all-0d055531.js";const S={data(){return{modal:"",couponText:"",couponList:[{title:"周年慶",couponCode:"Idoshou"},{title:"端午佳節",couponCode:"DragonFes"},{title:"中秋特價",couponCode:"MidAutumn"}]}},methods:{updateCoupon(){this.$emit("update-coupon",this.couponText),this.couponText=""}},mounted(){this.modal=new T(document.querySelector("#couponModal"),{backdrop:"static",keyboard:!1})}},N={class:"modal fade",id:"couponModal",tabindex:"-1","aria-labelledby":"couponModalLabel","aria-hidden":"true",ref:"modal"},A={class:"modal-dialog modal-dialog-centered"},E={class:"modal-content"},O=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"couponModalLabel"},"優惠券")],-1),j={class:"modal-body"},q={class:"input-group mb-3"},F={class:"modal-footer text-center"},P=["id","value"],H=["for"];function Y(s,e,h,m,l,r){return a(),n("div",N,[t("div",A,[t("div",E,[O,t("div",j,[t("div",q,[C(t("input",{type:"text",class:"form-control",placeholder:"請輸入優惠券代碼","onUpdate:modelValue":e[0]||(e[0]=i=>l.couponText=i)},null,512),[[k,l.couponText]]),t("button",{type:"button",class:"btn btn-outline-black",onClick:e[1]||(e[1]=p(i=>l.couponText="",["prevent"])),"data-bs-dismiss":"modal"},"取消"),t("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=p((...i)=>r.updateCoupon&&r.updateCoupon(...i),["prevent"]))},"確認")])]),t("div",F,[(a(!0),n(g,null,z(l.couponList,i=>(a(),n("div",{class:"form-check",key:i.title},[C(t("input",{class:"form-check-input",type:"radio",name:"radioCoupon",id:i.title,value:i.couponCode,"onUpdate:modelValue":e[3]||(e[3]=f=>l.couponText=f)},null,8,P),[[M,l.couponText]]),t("label",{class:"form-check-label",for:i.title},c(i.title),9,H)]))),128))])])])],512)}const G=x(S,[["render",Y]]);const{VITE_URL:J,VITE_PATH:K}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"sasimi1327",BASE_URL:"/Idoshou/",MODE:"production",DEV:!1,PROD:!0},Q={data(){return{color:"#C0362D",isLoading:!1}},watch:{loading(){this.isLoading=this.loading},isUpdateItem(){this.isUpdateItem||u.fire({position:"top-end",icon:"success",color:"#C0362D",toast:!0,text:"已更新購物車",showConfirmButton:!1,timer:1500,width:300,showClass:{popup:"animate__animated animate__fadeInRight"},hideClass:{popup:"animate__animated animate__fadeOutRight"}})},isDelItem(){this.isDelItem||u.fire({position:"top-end",icon:"success",color:"#C0362D",toast:!0,text:"已刪除品項",showConfirmButton:!1,timer:1500,width:300,showClass:{popup:"animate__animated animate__fadeInRight"},hideClass:{popup:"animate__animated animate__fadeOutRight"}})},isClearAll(){this.isClearAll||u.fire({position:"top-end",icon:"success",color:"#C0362D",toast:!0,text:"已清空購物車",showConfirmButton:!1,timer:1500,width:300,showClass:{popup:"animate__animated animate__fadeInRight"},hideClass:{popup:"animate__animated animate__fadeOutRight"}})}},components:{RouterLink:V,CouponModal:G,LoadingView:L},methods:{...R(w,["updateCartItem","deleteCartItem","clearCartItem","updateFinalTotal","getCarts"]),openCouponModal(){this.$refs.couponModal.modal.show()},updateCoupon(s){this.$refs.couponModal.modal.hide(),this.isLoading=!0;const e=`${J}/api/${K}/coupon`,h={code:s};this.$http.post(e,{data:h}).then(m=>{this.isCoupon=!0,this.getCarts(),this.isLoading=!1,u.fire({position:"top-end",icon:"success",color:"#C0362D",toast:!0,text:"已套用優惠券",showConfirmButton:!1,timer:1500,width:300,showClass:{popup:"animate__animated animate__fadeInRight"},hideClass:{popup:"animate__animated animate__fadeOutRight"}})}).catch(m=>{this.isLoading=!1,u.fire({position:"top-end",icon:"error",title:m.response.data.message,showConfirmButton:!1,timer:1500,showClass:{popup:"animate__animated animate__fadeInRight"},hideClass:{popup:"animate__animated animate__fadeOutRight"}})})}},computed:{...B(w,["carts","total","final_total","isCoupon","loading","isUpdateItem","isDelItem","isClearAll"])}},W={class:"vl-parent"},X=I('<div class="container-fluid header-picture d-flex flex-column justify-content-center"><div class="container"><ul class="row list-unstyled mb-0 justify-content-center align-items-center border border-1 border-dark text-center align-top"><li class="col-2 py-3 fz-6 word-nowrap text-primary"> Step.1 <div>購物車</div></li><li class="col-1 py-3 fz-6 text-grey-66 opacity-50"><i class="fa-solid fa-arrow-right"></i></li><li class="col-2 py-3 fz-6 word-nowrap text-grey-66 opacity-50"> Step.2 <div>訂單資訊</div></li><li class="col-1 py-3 fz-6 text-grey-66 opacity-50"><i class="fa-solid fa-arrow-right"></i></li><li class="col-2 py-3 fz-6 word-nowrap text-grey-66 opacity-50"> Step.3 <div>確認訂單</div></li><li class="col-1 py-3 fz-6 text-grey-66 opacity-50"><i class="fa-solid fa-arrow-right"></i></li><li class="col-2 py-3 fz-6 word-nowrap text-grey-66 opacity-50"> Step.4 <div>完成訂單</div></li></ul></div></div>',1),Z={class:"container my-10 mb-md-20"},tt=t("div",{class:"text-center pt-10 mb-6"},[t("h2",{class:"fz-2 lh-sm fw-normal"},"購物清單")],-1),ot={key:0,class:"py-4 border border-2 border-grey-66"},et={class:"text-center fz-1 py-10"},st=t("br",null,null,-1),it=I('<div class="d-none d-md-block"><ul class="row list-unstyled py-4 mb-0 border border-2 border-bottom-0 border-grey-66 fw-bold"><li class="col-md-5 text-center">商品資訊</li><li class="col-md-2">單件計價</li><li class="col-md-2">產品數量</li><li class="col-md-2">金額小計</li><li class="col-md-1">刪除</li></ul></div>',1),at={class:"col-md-5 mb-4 mb-md-0"},nt=["src","alt"],lt={class:"col-md-2 mb-4 mb-md-0"},dt=t("span",{class:"d-md-none fz-6 align-middle"},"單件計價：",-1),rt={class:"col-md-2 mb-4 mb-md-0"},ct={class:"input-group input-group-sm flex-nowrap"},pt=["onClick"],ut=t("i",{class:"fa-solid fa-minus"},null,-1),mt=[ut],_t={class:"text-center align-middle border-top border-bottom border-1 border-dark d-flex justify-content-center align-items-center",style:{height:"35px",width:"50px"}},ht=["onUpdate:modelValue"],ft=["onClick"],bt=t("i",{class:"fa-solid fa-plus"},null,-1),yt=[bt],Ct={class:"col-md-2 mb-4 mb-md-0"},gt=t("span",{class:"d-md-none fz-6 align-middle"},"金額小計：",-1),vt={class:"col-md-1 text-center"},wt=["onClick"],xt={class:"row py-3"},kt={class:"col-3"},zt=t("i",{class:"fa-sharp fa-solid fa-trash mr-1"},null,-1),It={class:"col-3"},$t=t("i",{class:"fa-solid fa-bag-shopping mr-1"},null,-1),Lt={class:"col-3"},Tt=["disabled"],Mt=t("i",{class:"fa-solid fa-ticket mr-1"},null,-1),Vt={key:0},Rt={key:1},Bt={class:"col-3"},Dt=t("i",{class:"fa-solid fa-credit-card mr-1"},null,-1),Ut={class:"row align-items-center"},St={class:"col-12 text-end fz-5 fw-normal"},Nt=t("span",{class:"fz-4 fw-bold mr-3"},"總計:",-1),At={key:0,class:"col-12 text-end fz-5 text-primary"},Et=t("span",{class:"fz-4 fw-bold mr-3"},"折扣價:",-1);function Ot(s,e,h,m,l,r){var v;const i=b("LoadingView"),f=b("RouterLink"),$=b("CouponModal");return a(),n("div",W,[y(i,{active:l.isLoading,"onUpdate:active":e[0]||(e[0]=o=>l.isLoading=o),"can-cancel":!1,color:l.color,loader:"bars","is-full-page":!0},null,8,["active","color"]),X,t("div",Z,[tt,(v=s.carts)!=null&&v.length?(a(),n(g,{key:1},[it,(a(!0),n(g,null,z(s.carts,o=>(a(),n("ul",{class:"row justify-content-center align-items-center list-unstyled p-4 mb-0 border border-1 mb-n-1px border-grey-66 position-relative",key:o.id},[t("li",at,[t("img",{src:o.product.imageUrl,class:"img-fluid w-40 h-40 object-fit-cover mr-5",alt:o.product.title},null,8,nt),d(" "+c(o.product.title),1)]),t("li",lt,[dt,d(" NT$ "+c(o.product.price),1)]),t("li",rt,[t("div",ct,[t("button",{type:"button",class:"btn btn-outline-primary",onClick:p(_=>{o.qty--,s.updateCartItem(o)},["prevent"])},mt,8,pt),t("div",_t,[C(t("input",{type:"text",disabled:"",class:"bg-transparent text-center fz-5 w-60 border-0","onUpdate:modelValue":_=>o.qty=_},null,8,ht),[[k,o.qty]])]),t("button",{type:"button",class:"btn btn-outline-primary",onClick:p(_=>{o.qty++,s.updateCartItem(o)},["prevent"])},yt,8,ft)])]),t("li",Ct,[gt,d(" NT$ "+c(o.product.price*o.qty),1)]),t("li",vt,[t("button",{type:"button",class:"btn-close position-absolute top-5 right-5 position-md-relative",onClick:_=>s.deleteCartItem(o)},null,8,wt)])]))),128)),t("div",xt,[t("div",kt,[t("button",{class:"w-100 p-4 bg-white fz-9 fz-md-4 cartBtn",type:"button",onClick:e[1]||(e[1]=p((...o)=>s.clearCartItem&&s.clearCartItem(...o),["prevent"]))},[zt,d(" 清空購物車 ")])]),t("div",It,[t("button",{class:"w-100 p-4 bg-white fz-9 fz-md-4 cartBtn",type:"button",onClick:e[2]||(e[2]=o=>s.$router.push("/menu"))},[$t,d(" 繼續選購 ")])]),t("div",Lt,[t("button",{class:"w-100 p-4 bg-white fz-9 fz-md-4 cartBtn",type:"button",onClick:e[3]||(e[3]=p((...o)=>r.openCouponModal&&r.openCouponModal(...o),["prevent"])),disabled:s.isCoupon},[Mt,s.isCoupon?(a(),n("span",Vt,"已套用優惠券")):(a(),n("span",Rt,"領取優惠券"))],8,Tt)]),t("div",Bt,[t("button",{class:"w-100 p-4 bg-white fz-9 fz-md-4 cartBtn",type:"button",onClick:e[4]||(e[4]=o=>s.$router.push("/checkout"))},[Dt,d(" 前往結帳 ")])])]),t("div",Ut,[t("div",St,[Nt,d(" NT$ "+c(this.total),1)]),this.total!==this.final_total?(a(),n("div",At,[Et,d(" NT$ "+c(this.final_total),1)])):U("",!0)])],64)):(a(),n("div",ot,[t("div",et,[d(" 目前購物車沒有商品"),st,y(f,{to:"/menu",type:"button",class:"btn btn-primary fz-5 lh-base p-3 align-middle mt-6"},{default:D(()=>[d("要吃飽，才有力氣減肥，繼續逛逛。")]),_:1})])]))]),y($,{ref:"couponModal",onUpdateCoupon:r.updateCoupon},null,8,["onUpdateCoupon"])])}const Gt=x(Q,[["render",Ot]]);export{Gt as default};
