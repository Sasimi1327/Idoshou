import{j as d,k as e}from"./index-0c372b4e.js";const{VITE_URL:i,VITE_PATH:l}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"sasimi1327",BASE_URL:"/Idoshou/",MODE:"production",DEV:!1,PROD:!0},n=d("cart",{state:()=>({loading:!1,isAddToCart:!1,isUpdateItem:!1,isDelItem:!1,isClearAll:!1,carts:[],total:0,final_total:0,isCoupon:!1}),actions:{getCarts(){this.loading=!0;const a=`${i}/api/${l}/cart`;e.get(a).then(t=>{this.carts=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.isCoupon=this.total!==this.final_total,this.loading=!1}).catch(t=>{console.log("購物車列表",t),this.loading=!1})},updateCartItem(a){this.loading=!0,this.isUpdateItem=!0;const t=`${i}/api/${l}/cart/${a.id}`,s={product_id:a.product_id,qty:a.qty};e.put(t,{data:s}).then(o=>{this.getCarts(),this.isUpdateItem=!1,this.loading=!1}).catch(o=>{console.log("更新購物車數量",o),this.isUpdateItem=!1,this.loading=!1})},deleteCartItem(a){this.loading=!0,this.isDelItem=!0;const t=`${i}/api/${l}/cart/${a.id}`;e.delete(t).then(s=>{this.getCarts(),this.isDelItem=!1,this.loading=!1}).catch(s=>{console.log("刪除購物車品項",s),this.isDelItem=!1,this.loading=!1})},clearCartItem(){this.loading=!0,this.isClearAll=!0;const a=`${i}/api/${l}/carts`;e.delete(a).then(t=>{this.getCarts(),this.isClearAll=!1,this.loading=!1}).catch(t=>{console.log("清空購物車",t),this.isClearAll=!1,this.loading=!1})},addToCart(a,t=1){this.loading=!0,this.isAddToCart=!0;const s=`${i}/api/${l}/cart`,o={data:{product_id:a,qty:t}};e.post(s,o).then(r=>{this.getCarts(),this.isAddToCart=!1,this.loading=!1}).catch(r=>{console.log("加入購物車",r),this.isAddToCart=!1,this.loading=!1})},updateFinalTotal(a){this.final_total=a}}});export{n as c};
